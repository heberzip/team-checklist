<section class="checklist-list-section">
  <h2>Checklists</h2>
  <div class="flex items-center justify-start gap-4">
    <p-button label="Añadir checklist" class="zt-primary" (click)="goNew()" />
  </div>

  @if (loading) {
  <p>Cargando…</p>
  } @if (error) {
  <p>{{ error }}</p>
  } @if (!loading && data.length) {
  <ul class="checklist-list-grid">
    @for (c of data; track c.id) {
    <li class="checklist-card">
      <div class="checklist-card header">
        <div class="flex flex-col gap-0">
          <strong (click)="openDetails(c.id)">{{ c.title }}</strong>
          <small>{{ c.createdAt | date : "short" }}</small>
        </div>
        <div class="flex items-center gap-1">
          <p-button
            icon="pi pi-pencil"
            class="zt-icon square success"
            (click)="goEdit(c.id)"
          />
          <p-button
            icon="pi pi-trash"
            class="zt-icon square error"
            (click)="delete(c.id)"
          />
        </div>
      </div>
      @if (c.description && c.description.length > 0) {
      <div class="checklist-description">
        <p class="checklist-description title">{{ description() }}</p>
        <p class="checklist-description content">{{ c.description }}</p>
      </div>
      }
      <p-button
        label="Abrir"
        (click)="openDetails(c.id)"
        class="zt-primary justify-center"
      />
    </li>
    }
  </ul>
  } @else if (!loading) {
  <p>Sin registros.</p>
  }
</section>
